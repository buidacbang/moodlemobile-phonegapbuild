webpackJsonp([99],{1432:function(n,l,t){"use strict";function u(n){return h._27(0,[(n()(),h._3(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,j.b,j.a)),h._2(1,49152,null,0,V.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._18(131072,B.a,[F.a,h.g]),(n()(),h._25(-1,0,["\n            "]))],function(n,l){n(l,1,0,h._26(l,1,0,h._15(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function i(n){return h._27(0,[(n()(),h._3(0,0,null,null,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),h._2(1,16384,null,0,H.a,[],null,null),(n()(),h._25(-1,null,["\n                            "])),(n()(),h._3(3,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),h._2(4,4210688,null,0,W.a,[h.l,Z.a,q.a,z.a,S.a,C.a,K.a,Q.a],null,null),h._19(5,{$a:0}),h._18(131072,B.a,[F.a,h.g]),(n()(),h._25(-1,null,["\n                        "]))],null,function(n,l){n(l,3,0,l.parent.context.$implicit.userprofileimageurl,h._26(l,3,1,h._15(l,6).transform("core.pictureof",n(l,5,0,l.parent.context.$implicit.userfullname))))})}function a(n){return h._27(0,[(n()(),h._3(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),h._25(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function s(n){return h._27(0,[(n()(),h._3(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),h._25(1,null,["","",""])),h._18(131072,B.a,[F.a,h.g])],null,function(n,l){n(l,1,0,h._26(l,1,0,h._15(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function e(n){return h._27(0,[(n()(),h._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),h._25(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function o(n){return h._27(0,[(n()(),h._3(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._25(1,null,["",""])),h._18(131072,B.a,[F.a,h.g])],null,function(n,l){n(l,1,0,h._26(l,1,0,h._15(l,2).transform("addon.mod_assign.noteam")))})}function r(n){return h._27(0,[(n()(),h._3(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._25(1,null,["",""])),h._18(131072,B.a,[F.a,h.g])],null,function(n,l){n(l,1,0,h._26(l,1,0,h._15(l,2).transform("addon.mod_assign.multipleteams")))})}function _(n){return h._27(0,[(n()(),h._3(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._25(1,null,["",""])),h._18(131072,B.a,[F.a,h.g])],null,function(n,l){n(l,1,0,h._26(l,1,0,h._15(l,2).transform("addon.mod_assign.defaultteam")))})}function d(n){return h._27(0,[(n()(),h._3(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),h._25(-1,null,["\n                            "])),(n()(),h.Y(16777216,null,null,1,null,e)),h._2(3,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,null,["\n                            "])),(n()(),h.Y(16777216,null,null,1,null,o)),h._2(6,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,null,["\n                            "])),(n()(),h.Y(16777216,null,null,1,null,r)),h._2(9,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,null,["\n                            "])),(n()(),h.Y(16777216,null,null,1,null,_)),h._2(12,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,null,["\n                        "]))],function(n,l){var t=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&!l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function c(n){return h._27(0,[(n()(),h._3(0,0,null,null,2,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._2(1,16384,null,0,nn.a,[ln.a,h.l,h.C],{color:[0,"color"]},null),(n()(),h._25(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function g(n){return h._27(0,[(n()(),h._3(0,0,null,null,3,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._2(1,16384,null,0,nn.a,[ln.a,h.l,h.C],{color:[0,"color"]},null),(n()(),h._25(2,null,["\n                            ","\n                        "])),h._18(131072,B.a,[F.a,h.g])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,h._26(l,2,0,h._15(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function m(n){return h._27(0,[(n()(),h._3(0,0,null,null,27,null,null,null,null,null,null,null)),(n()(),h._25(-1,null,["\n                    "])),(n()(),h._3(2,0,null,null,24,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.loadSubmission(n.context.$implicit)&&u}return u},tn.b,tn.a)),h._2(3,1097728,null,3,un.a,[an.a,ln.a,h.l,h.C,[2,sn.a]],null,null),h._23(335544320,3,{contentLabel:0}),h._23(603979776,4,{_buttons:1}),h._23(603979776,5,{_icons:1}),h._2(7,16384,null,0,en.a,[],null,null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,0,1,null,i)),h._2(10,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,2,1,null,a)),h._2(13,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,2,1,null,s)),h._2(16,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,2,1,null,d)),h._2(19,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,2,1,null,c)),h._2(22,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                        "])),(n()(),h.Y(16777216,null,2,1,null,g)),h._2(25,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,2,["\n                    "])),(n()(),h._25(-1,null,["\n                "]))],function(n,l){var t=l.component;n(l,10,0,l.context.$implicit.userprofileimageurl);n(l,13,0,l.context.$implicit.userfullname);n(l,16,0,!l.context.$implicit.userfullname);n(l,19,0,t.assign.teamsubmission);n(l,22,0,l.context.$implicit.statusTranslated);n(l,25,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.id==l.component.selectedSubmissionId)})}function f(n){return h._27(0,[(n()(),h._3(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,tn.b,tn.a)),h._2(1,1097728,null,3,un.a,[an.a,ln.a,h.l,h.C,[2,sn.a]],null,null),h._23(335544320,6,{contentLabel:0}),h._23(603979776,7,{_buttons:1}),h._23(603979776,8,{_icons:1}),h._2(5,16384,null,0,en.a,[],null,null),(n()(),h._25(-1,2,["\n                    "])),(n()(),h._3(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),h._2(8,147456,[[8,4]],0,on.a,[ln.a,h.l,h.C],{name:[0,"name"]},null),(n()(),h._25(9,2,["\n                    ","\n                "])),h._18(131072,B.a,[F.a,h.g])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,h._15(l,8)._hidden);n(l,9,0,h._26(l,9,0,h._15(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function p(n){return h._27(0,[h._23(402653184,1,{splitviewCtrl:0}),(n()(),h._3(1,0,null,null,15,"ion-header",[],null,null,null,null,null)),h._2(2,16384,null,0,rn.a,[ln.a,h.l,h.C,[2,_n.a]],null,null),(n()(),h._25(-1,null,["\n    "])),(n()(),h._3(4,0,null,null,11,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,dn.b,dn.a)),h._2(5,49152,null,0,cn.a,[gn.a,[2,_n.a],[2,mn.a],ln.a,h.l,h.C],null,null),(n()(),h._25(-1,3,["\n        "])),(n()(),h._3(7,0,null,3,3,"ion-title",[],null,null,null,fn.b,fn.a)),h._2(8,49152,null,0,pn.a,[ln.a,h.l,h.C,[2,hn.a],[2,cn.a]],null,null),(n()(),h._3(9,0,null,0,1,"core-format-text",[],null,null,null,null,null)),h._2(10,540672,null,0,bn.a,[h.l,S.a,C.a,vn.a,F.a,z.a,In.a,K.a,Z.a,q.a,Q.a,xn.a,[2,mn.a],[2,Sn.a]],{text:[0,"text"]},null),(n()(),h._25(-1,3,["\n\n        "])),(n()(),h._3(12,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),h._2(13,16384,null,1,Cn.a,[ln.a,h.l,h.C,[2,hn.a],[2,cn.a]],null,null),h._23(603979776,2,{_buttons:1}),(n()(),h._25(-1,3,["\n    "])),(n()(),h._25(-1,null,["\n"])),(n()(),h._25(-1,null,["\n"])),(n()(),h._3(18,0,null,null,32,"core-split-view",[],null,null,null,Pn.b,Pn.a)),h._2(19,114688,[[1,4]],0,M.a,[[2,mn.a],h.l],null,null),(n()(),h._25(-1,0,["\n    "])),(n()(),h._3(21,0,null,0,28,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,$n.b,$n.a)),h._2(22,4374528,null,0,Sn.a,[ln.a,z.a,An.a,h.l,h.C,gn.a,Mn.a,h.x,[2,_n.a],[2,mn.a]],null,null),(n()(),h._25(-1,1,["\n        "])),(n()(),h._3(24,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var u=!0;if("ionRefresh"===l){u=!1!==n.component.refreshList(t)&&u}return u},null,null)),h._2(25,212992,null,0,wn.a,[z.a,Sn.a,h.x,yn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),h._25(-1,null,["\n            "])),(n()(),h._3(27,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,kn.b,kn.a)),h._2(28,114688,null,0,Dn.a,[wn.a,ln.a],{pullingText:[0,"pullingText"]},null),h._18(131072,B.a,[F.a,h.g]),(n()(),h._25(-1,null,["\n        "])),(n()(),h._25(-1,1,["\n        "])),(n()(),h._3(32,0,null,1,16,"core-loading",[],null,null,null,Tn.b,Tn.a)),h._2(33,638976,null,0,Jn.a,[F.a,h.l],{hideUntil:[0,"hideUntil"]},null),(n()(),h._25(-1,0,["\n            "])),(n()(),h.Y(16777216,null,0,1,null,u)),h._2(36,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,0,["\n\n            "])),(n()(),h._3(38,0,null,0,9,"ion-list",[],null,null,null,null,null)),h._2(39,16384,null,0,On.a,[ln.a,h.l,h.C,z.a,yn.l,An.a],null,null),(n()(),h._25(-1,null,["\n                "])),(n()(),h._25(-1,null,["\n                "])),(n()(),h.Y(16777216,null,null,1,null,m)),h._2(43,802816,null,0,X.j,[h.M,h.J,h.r],{ngForOf:[0,"ngForOf"]},null),(n()(),h._25(-1,null,["\n\n                "])),(n()(),h.Y(16777216,null,null,1,null,f)),h._2(46,16384,null,0,X.k,[h.M,h.J],{ngIf:[0,"ngIf"]},null),(n()(),h._25(-1,null,["\n            "])),(n()(),h._25(-1,0,["\n        "])),(n()(),h._25(-1,1,["\n    "])),(n()(),h._25(-1,0,["\n"])),(n()(),h._25(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,10,0,t.title),n(l,19,0);n(l,25,0,t.loaded);n(l,28,0,h._6(1,"",h._26(l,28,0,h._15(l,29).transform("core.pulltorefresh")),""));n(l,33,0,t.loaded);n(l,36,0,!t.submissions||0==t.submissions.length);n(l,43,0,t.submissions);n(l,46,0,!t.haveAllParticipants)},function(n,l){n(l,4,0,h._15(l,5)._hidden,h._15(l,5)._sbPadding);n(l,21,0,h._15(l,22).statusbarPadding,h._15(l,22)._hasRefresher);n(l,24,0,"inactive"!==h._15(l,25).state,h._15(l,25)._top);n(l,27,0,h._15(l,28).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var h=t(1),b=(t(0),t(10),t(8)),v=t(33),I=t(31),x=t(22),S=t(2),C=t(7),P=t(65),$=t(104),A=t(148),M=t(129),w=function(){function n(n,l,t,u,i,a,s,e){var o=this;this.domUtils=u,this.translate=i,this.assignProvider=a,this.assignOfflineProvider=s,this.assignHelper=e,this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==P.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=t.on(P.a.GRADED_EVENT,function(n){o.assign&&n.assignmentId==o.assign.id&&n.userId==l.getCurrentSiteUserId()&&(o.loaded=!1,o.refreshAllData().finally(function(){o.loaded=!0}))},l.getCurrentSiteId())}return n.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},n.prototype.ionViewCanLeave=function(){if(this.splitviewCtrl.isOn()){var n=this.splitviewCtrl.getDetailsNav().getActive().instance;if(n&&n.ionViewCanLeave)return n.ionViewCanLeave()}return!0},n.prototype.fetchAssignment=function(){var n,l,t=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){return t.title=n.name||t.title,t.assign=n,t.haveAllParticipants=!0,t.assignProvider.getSubmissions(n.id)}).then(function(u){return u.canviewsubmissions?(l=u,t.assignHelper.getParticipants(t.assign).then(function(l){t.haveAllParticipants=!0,n=l}).catch(function(){t.haveAllParticipants=!1})):Promise.reject(null)}).then(function(){return t.assignProvider.getSubmissionsUserData(l.submissions,t.courseId,t.assign.id,t.assign.blindmarking&&!t.assign.revealidentities,n)}).then(function(n){var l=t.selectedStatus==P.a.NEED_GRADING,u=l?P.a.SUBMISSION_STATUS_SUBMITTED:t.selectedStatus,i=[];return t.submissions=[],n.forEach(function(n){u&&u!=n.status||i.push(t.assignOfflineProvider.getSubmissionGrade(t.assign.id,n.userid).catch(function(){}).then(function(u){var i=!1;return u&&n.timemodified<u.timemodified&&(i=!0),(l?t.assignProvider.needsSubmissionToBeGraded(n,t.assign.id):Promise.resolve(!0)).then(function(l){l&&(n.statusColor=t.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=t.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated=("success"!=n.statusColor||!n.gradingstatus)&&t.translate.instant("addon.mod_assign.submissionstatus_"+n.status),i?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId=("danger"!=n.statusColor||"danger"!=n.gradingColor)&&t.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus),t.submissions.push(n))})}))}),Promise.all(i)}).catch(function(n){t.domUtils.showErrorModalDefault(n,"Error getting assigment data.")})},n.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.id&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.id,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},n.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},n.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},n.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},n}(),y=function(){return function(){}}(),k=t(925),D=t(926),T=t(927),J=t(928),O=t(929),Y=t(930),E=t(931),G=t(932),U=t(933),L=t(936),R=t(937),N=t(938),j=t(149),V=t(130),B=t(29),F=t(17),H=t(182),W=t(163),Z=t(3),q=t(16),z=t(14),K=t(24),Q=t(13),X=t(9),nn=t(225),ln=t(4),tn=t(34),un=t(20),an=t(19),sn=t(30),en=t(32),on=t(38),rn=t(391),_n=t(35),dn=t(934),cn=t(179),gn=t(28),mn=t(21),fn=t(935),pn=t(308),hn=t(223),bn=t(41),vn=t(11),In=t(5),xn=t(23),Sn=t(25),Cn=t(392),Pn=t(394),$n=t(180),An=t(26),Mn=t(94),wn=t(140),yn=t(36),kn=t(200),Dn=t(147),Tn=t(59),Jn=t(57),On=t(76),Yn=t(55),En=h._1({encapsulation:2,styles:[],data:{}}),Gn=h.Z("page-addon-mod-assign-submission-list",w,function(n){return h._27(0,[(n()(),h._3(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,p,En)),h._2(1,245760,null,0,w,[Yn.a,S.a,x.a,C.a,F.a,P.a,$.a,A.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Un=t(18),Ln=t(304),Rn=t(305),Nn=t(307),jn=t(306),Vn=t(390),Bn=t(528),Fn=t(119),Hn=t(224);t.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return Wn});var Wn=h._0(y,[],function(n){return h._11([h._12(512,h.j,h.W,[[8,[k.a,D.a,T.a,J.a,O.a,Y.a,E.a,G.a,U.a,L.a,R.a,N.a,Gn]],[3,h.j],h.v]),h._12(4608,X.m,X.l,[h.t,[2,X.v]]),h._12(4608,Un.x,Un.x,[]),h._12(4608,Un.d,Un.d,[]),h._12(4608,Ln.b,Ln.a,[]),h._12(4608,Rn.a,Rn.b,[]),h._12(4608,Nn.b,Nn.a,[]),h._12(4608,jn.b,jn.a,[]),h._12(4608,F.a,F.a,[Vn.a,Ln.b,Rn.a,Nn.b,jn.b,F.b,F.c]),h._12(512,X.b,X.b,[]),h._12(512,Un.v,Un.v,[]),h._12(512,Un.i,Un.i,[]),h._12(512,Un.s,Un.s,[]),h._12(512,Bn.a,Bn.a,[]),h._12(512,b.a,b.a,[]),h._12(512,I.a,I.a,[]),h._12(512,Fn.a,Fn.a,[]),h._12(512,v.a,v.a,[]),h._12(512,Bn.b,Bn.b,[]),h._12(512,y,y,[]),h._12(256,F.c,void 0,[]),h._12(256,F.b,void 0,[]),h._12(256,Hn.a,w,[])])})}});