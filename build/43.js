webpackJsonp([43],{1503:function(l,n,u){"use strict";function i(l){return c._27(0,[(l()(),c._3(0,0,null,null,21,"div",[],null,null,null,null,null)),(l()(),c._25(-1,null,["\n                "])),(l()(),c._3(2,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(l()(),c._25(3,null,["",""])),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,null,["\n                "])),(l()(),c._3(6,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,O.b,O.a)),c._2(7,1097728,null,3,J.a,[T.a,Y.a,c.l,c.C,[2,A.a]],null,null),c._23(335544320,2,{contentLabel:0}),c._23(603979776,3,{_buttons:1}),c._23(603979776,4,{_icons:1}),c._2(11,16384,null,0,B.a,[],null,null),(l()(),c._25(-1,2,["\n                    "])),(l()(),c._3(13,0,null,3,6,"ion-input",[["formControlName","siteUrl"],["name","url"],["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,E.b,E.a)),c._2(14,81920,null,0,j.a,[c.l,f.a,D.a,[2,$.a]],null,null),c._2(15,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),c._21(2048,null,b.m,null,[b.f]),c._2(17,16384,null,0,b.n,[b.m],null,null),c._2(18,5423104,null,0,N.a,[Y.a,V.a,T.a,q.a,c.l,c.C,[2,R.a],[2,J.a],[2,b.m],K.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,2,["\n                "])),(l()(),c._25(-1,null,["\n            "]))],function(l,n){l(n,14,0);l(n,15,0,"siteUrl");l(n,18,0,"url",c._6(1,"",c._26(n,18,1,c._15(n,19).transform("core.login.siteaddress")),""))},function(l,n){l(n,3,0,c._26(n,3,0,c._15(n,4).transform("core.login.newsitedescription")));l(n,13,0,c._15(n,17).ngClassUntouched,c._15(n,17).ngClassTouched,c._15(n,17).ngClassPristine,c._15(n,17).ngClassDirty,c._15(n,17).ngClassValid,c._15(n,17).ngClassInvalid,c._15(n,17).ngClassPending)})}function e(l){return c._27(0,[(l()(),c._3(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),c._2(1,16384,[[8,4]],0,W.a,[c.l],{value:[0,"value"]},null),(l()(),c._25(2,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.url)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function t(l){return c._27(0,[(l()(),c._3(0,0,null,null,25,"ion-item",[["class","item item-block"]],null,null,null,O.b,O.a)),c._2(1,1097728,null,3,J.a,[T.a,Y.a,c.l,c.C,[2,A.a]],null,null),c._23(335544320,5,{contentLabel:0}),c._23(603979776,6,{_buttons:1}),c._23(603979776,7,{_icons:1}),c._2(5,16384,null,0,B.a,[],null,null),(l()(),c._25(-1,2,["\n                    "])),(l()(),c._25(-1,2,["\n                    "])),(l()(),c._3(8,0,null,1,3,"ion-label",[["for","siteSelect"]],null,null,null,null,null)),c._2(9,16384,[[5,4]],0,Z.a,[Y.a,c.l,c.C,[8,null],[8,null],[8,null],[8,null]],null,null),(l()(),c._25(10,null,["",""])),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,2,["\n                    "])),(l()(),c._3(13,0,null,3,11,"ion-select",[["formControlName","siteUrl"],["interface","popover"],["name","url"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==c._15(l,14)._click(u)&&i}if("keyup.space"===n){i=!1!==c._15(l,14)._keyup()&&i}return i},z.b,z.a)),c._2(14,1228800,null,1,G.a,[q.a,T.a,Y.a,c.l,c.C,[2,J.a],Q.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),c._23(603979776,8,{options:1}),c._18(131072,L.a,[H.a,c.g]),c._21(1024,null,b.l,function(l){return[l]},[G.a]),c._2(18,671744,null,0,b.f,[[3,b.b],[8,null],[8,null],[2,b.l]],{name:[0,"name"]},null),c._21(2048,null,b.m,null,[b.f]),c._2(20,16384,null,0,b.n,[b.m],null,null),(l()(),c._25(-1,null,["\n                        "])),(l()(),c.Y(16777216,null,null,1,null,e)),c._2(23,802816,null,0,X.j,[c.M,c.J,c.r],{ngForOf:[0,"ngForOf"]},null),(l()(),c._25(-1,null,["\n                    "])),(l()(),c._25(-1,2,["\n                "]))],function(l,n){var u=n.component;l(n,14,0,c._6(1,"",c._26(n,14,0,c._15(n,16).transform("core.login.siteaddress")),""),"popover");l(n,18,0,"siteUrl");l(n,23,0,u.fixedSites)},function(l,n){l(n,10,0,c._26(n,10,0,c._15(n,11).transform("core.login.selectsite")));l(n,13,0,c._15(n,14)._disabled,c._15(n,20).ngClassUntouched,c._15(n,20).ngClassTouched,c._15(n,20).ngClassPristine,c._15(n,20).ngClassDirty,c._15(n,20).ngClassValid,c._15(n,20).ngClassInvalid,c._15(n,20).ngClassPending)})}function o(l){return c._27(0,[(l()(),c._3(0,0,null,null,2,"a",[["block",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==l.component.connect(l.context.$implicit.url)&&i}return i},ll.b,ll.a)),c._2(1,1097728,null,0,nl.a,[[8,""],Y.a,c.l,c.C],{block:[0,"block"]},null),(l()(),c._25(2,0,["",""]))],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,c._6(1,"",n.context.$implicit.name,""));l(n,2,0,n.context.$implicit.name)})}function a(l){return c._27(0,[(l()(),c._3(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),c._25(-1,null,["\n                    "])),(l()(),c._3(2,0,null,null,2,"p",[["class","padding no-padding-bottom"]],null,null,null,null,null)),(l()(),c._25(3,null,["",""])),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,null,["\n                    "])),(l()(),c.Y(16777216,null,null,1,null,o)),c._2(7,802816,null,0,X.j,[c.M,c.J,c.r],{ngForOf:[0,"ngForOf"]},null),(l()(),c._25(-1,null,["\n                "]))],function(l,n){l(n,7,0,n.component.fixedSites)},function(l,n){l(n,3,0,c._26(n,3,0,c._15(n,4).transform("core.login.selectsite")))})}function r(l){return c._27(0,[(l()(),c._3(0,0,null,null,9,"div",[["text-wrap",""]],null,null,null,null,null)),(l()(),c._25(-1,null,["\n                "])),(l()(),c._25(-1,null,["\n                "])),(l()(),c.Y(16777216,null,null,1,null,t)),c._2(4,16384,null,0,X.k,[c.M,c.J],{ngIf:[0,"ngIf"]},null),(l()(),c._25(-1,null,["\n\n                "])),(l()(),c._25(-1,null,["\n                "])),(l()(),c.Y(16777216,null,null,1,null,a)),c._2(8,16384,null,0,X.k,[c.M,c.J],{ngIf:[0,"ngIf"]},null),(l()(),c._25(-1,null,["\n            "]))],function(l,n){var u=n.component;l(n,4,0,!u.displayAsButtons);l(n,8,0,u.displayAsButtons)},null)}function s(l){return c._27(0,[(l()(),c._3(0,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],null,null,ll.b,ll.a)),c._2(1,1097728,null,0,nl.a,[[8,""],Y.a,c.l,c.C],{block:[0,"block"]},null),(l()(),c._25(2,0,["",""])),c._18(131072,L.a,[H.a,c.g])],function(l,n){l(n,1,0,"")},function(l,n){l(n,0,0,!n.component.siteForm.valid);l(n,2,0,c._26(n,2,0,c._15(n,3).transform("core.login.connect")))})}function _(l){return c._27(0,[(l()(),c._3(0,0,null,null,24,"ion-header",[],null,null,null,null,null)),c._2(1,16384,null,0,ul.a,[Y.a,c.l,c.C,[2,il.a]],null,null),(l()(),c._25(-1,null,["\n    "])),(l()(),c._3(3,0,null,null,20,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,el.b,el.a)),c._2(4,49152,null,0,tl.a,[q.a,[2,il.a],[2,$.a],Y.a,c.l,c.C],null,null),(l()(),c._25(-1,3,["\n        "])),(l()(),c._3(6,0,null,3,3,"ion-title",[],null,null,null,ol.b,ol.a)),c._2(7,49152,null,0,al.a,[Y.a,c.l,c.C,[2,rl.a],[2,tl.a]],null,null),(l()(),c._25(8,0,["",""])),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,3,["\n\n        "])),(l()(),c._3(11,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),c._2(12,16384,null,1,sl.a,[Y.a,c.l,c.C,[2,rl.a],[2,tl.a]],null,null),c._23(603979776,1,{_buttons:1}),(l()(),c._25(-1,null,["\n            "])),(l()(),c._3(15,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,u){var i=!0;if("click"===n){i=!1!==l.component.showHelp()&&i}return i},ll.b,ll.a)),c._2(16,1097728,[[1,4]],0,nl.a,[[8,""],Y.a,c.l,c.C],null,null),c._18(131072,L.a,[H.a,c.g]),(l()(),c._25(-1,0,["\n                "])),(l()(),c._3(19,0,null,0,1,"ion-icon",[["name","help-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),c._2(20,147456,null,0,_l.a,[Y.a,c.l,c.C],{name:[0,"name"]},null),(l()(),c._25(-1,0,["\n            "])),(l()(),c._25(-1,null,["\n        "])),(l()(),c._25(-1,3,["\n    "])),(l()(),c._25(-1,null,["\n"])),(l()(),c._25(-1,null,["\n"])),(l()(),c._3(26,0,null,null,28,"ion-content",[["class","core-center-view"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,cl.b,cl.a)),c._2(27,4374528,null,0,R.a,[Y.a,V.a,K.a,c.l,c.C,q.a,dl.a,c.x,[2,il.a],[2,$.a]],null,null),(l()(),c._25(-1,1,["\n    "])),(l()(),c._3(29,0,null,1,24,"div",[["class","box"]],null,null,null,null,null)),(l()(),c._25(-1,null,["\n        "])),(l()(),c._3(31,0,null,null,3,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(l()(),c._25(-1,null,["\n            "])),(l()(),c._3(33,0,null,null,0,"img",[["class","avatar-full login-logo"],["role","presentation"],["src","assets/img/login_logo.png"]],null,null,null,null,null)),(l()(),c._25(-1,null,["\n        "])),(l()(),c._25(-1,null,["\n        "])),(l()(),c._3(36,0,null,null,16,"form",[["ion-list",""],["no-lines",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var i=!0,e=l.component;if("submit"===n){i=!1!==c._15(l,38).onSubmit(u)&&i}if("reset"===n){i=!1!==c._15(l,38).onReset()&&i}if("ngSubmit"===n){i=!1!==e.connect(e.siteForm.value.siteUrl)&&i}return i},null,null)),c._2(37,16384,null,0,b.w,[],null,null),c._2(38,540672,null,0,b.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),c._21(2048,null,b.b,null,[b.h]),c._2(40,16384,null,0,b.o,[b.b],null,null),(l()(),c._25(-1,null,["\n            "])),(l()(),c._25(-1,null,["\n            "])),(l()(),c.Y(16777216,null,null,1,null,i)),c._2(44,16384,null,0,X.k,[c.M,c.J],{ngIf:[0,"ngIf"]},null),(l()(),c._25(-1,null,["\n\n            "])),(l()(),c._25(-1,null,["\n            "])),(l()(),c.Y(16777216,null,null,1,null,r)),c._2(48,16384,null,0,X.k,[c.M,c.J],{ngIf:[0,"ngIf"]},null),(l()(),c._25(-1,null,["\n\n            "])),(l()(),c.Y(16777216,null,null,1,null,s)),c._2(51,16384,null,0,X.k,[c.M,c.J],{ngIf:[0,"ngIf"]},null),(l()(),c._25(-1,null,["\n        "])),(l()(),c._25(-1,null,["\n    "])),(l()(),c._25(-1,1,["\n"])),(l()(),c._25(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,20,0,"help-circle");l(n,38,0,u.siteForm);l(n,44,0,!u.fixedSites);l(n,48,0,u.fixedSites);l(n,51,0,!u.fixedSites||!u.displayAsButtons)},function(l,n){l(n,3,0,c._15(n,4)._hidden,c._15(n,4)._sbPadding);l(n,8,0,c._26(n,8,0,c._15(n,9).transform("core.login.connecttomoodle")));l(n,15,0,c._26(n,15,0,c._15(n,17).transform("core.help")));l(n,19,0,c._15(n,20)._hidden);l(n,26,0,c._15(n,27).statusbarPadding,c._15(n,27)._hasRefresher);l(n,36,0,c._15(n,40).ngClassUntouched,c._15(n,40).ngClassTouched,c._15(n,40).ngClassPristine,c._15(n,40).ngClassDirty,c._15(n,40).ngClassValid,c._15(n,40).ngClassInvalid,c._15(n,40).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var c=u(1),d=(u(0),u(10),u(13)),g=u(2),f=u(7),p=u(116),m=u(113),b=u(18),h=function(){function l(l,n,u,i,e,t,o){this.navCtrl=l,this.appProvider=u,this.sitesProvider=i,this.loginHelper=e,this.modalCtrl=t,this.domUtils=o,this.displayAsButtons=!1;var a="";this.loginHelper.hasSeveralFixedSites()&&(this.fixedSites=this.loginHelper.getFixedSites(),this.displayAsButtons="buttons"==p.a.multisitesdisplay,a=this.fixedSites[0].url),this.siteForm=n.group({siteUrl:[a,b.u.required]})}return l.prototype.connect=function(l){var n=this;if(this.appProvider.closeKeyboard(),l)if(this.appProvider.isOnline()){var u=this.domUtils.showModalLoading(),i=this.sitesProvider.getDemoSiteData(l);i?this.sitesProvider.getUserToken(i.url,i.username,i.password).then(function(l){return n.sitesProvider.newSite(l.siteUrl,l.token,l.privateToken).then(function(){return n.loginHelper.goToSiteInitialPage()},function(l){n.domUtils.showErrorModal(l)})},function(l){n.loginHelper.treatUserTokenError(i.url,l)}).finally(function(){u.dismiss()}):this.sitesProvider.checkSite(l).then(function(l){l.warning&&n.domUtils.showErrorModal(l.warning,!0,4e3),n.loginHelper.isSSOLoginNeeded(l.code)?n.loginHelper.confirmAndOpenBrowserForSSOLogin(l.siteUrl,l.code,l.service,l.config&&l.config.launchurl):n.navCtrl.push("CoreLoginCredentialsPage",{siteUrl:l.siteUrl,siteConfig:l.config})},function(u){n.showLoginIssue(l,u)}).finally(function(){u.dismiss()})}else this.domUtils.showErrorModal("core.networkerrormsg",!0);else this.domUtils.showErrorModal("core.login.siteurlrequired",!0)},l.prototype.showHelp=function(){this.modalCtrl.create("CoreLoginSiteHelpPage").present()},l.prototype.showLoginIssue=function(l,n){this.modalCtrl.create("CoreLoginSiteErrorPage",{siteUrl:l,issue:n}).present()},l}(),v=u(8),C=u(31),k=function(){return function(){}}(),y=u(925),S=u(926),P=u(927),U=u(928),w=u(929),x=u(930),I=u(931),M=u(932),F=u(933),L=u(29),H=u(17),O=u(34),J=u(20),T=u(19),Y=u(4),A=u(30),B=u(32),E=u(95),j=u(312),D=u(5),$=u(21),N=u(78),V=u(14),q=u(28),R=u(25),K=u(26),W=u(102),Z=u(62),z=u(120),G=u(103),Q=u(49),X=u(9),ll=u(44),nl=u(39),ul=u(391),il=u(35),el=u(934),tl=u(179),ol=u(935),al=u(308),rl=u(223),sl=u(392),_l=u(38),cl=u(180),dl=u(94),gl=u(203),fl=c._1({encapsulation:2,styles:[],data:{}}),pl=c.Z("page-core-login-site",h,function(l){return c._27(0,[(l()(),c._3(0,0,null,null,1,"page-core-login-site",[],null,null,null,_,fl)),c._2(1,49152,null,0,h,[$.a,b.d,d.a,g.a,m.a,gl.a,f.a],null,null)],null,null)},{},{},[]),ml=u(304),bl=u(305),hl=u(307),vl=u(306),Cl=u(390),kl=u(528),yl=u(224);u.d(n,"CoreLoginSitePageModuleNgFactory",function(){return Sl});var Sl=c._0(k,[],function(l){return c._11([c._12(512,c.j,c.W,[[8,[y.a,S.a,P.a,U.a,w.a,x.a,I.a,M.a,F.a,pl]],[3,c.j],c.v]),c._12(4608,X.m,X.l,[c.t,[2,X.v]]),c._12(4608,b.x,b.x,[]),c._12(4608,b.d,b.d,[]),c._12(4608,ml.b,ml.a,[]),c._12(4608,bl.a,bl.b,[]),c._12(4608,hl.b,hl.a,[]),c._12(4608,vl.b,vl.a,[]),c._12(4608,H.a,H.a,[Cl.a,ml.b,bl.a,hl.b,vl.b,H.b,H.c]),c._12(512,C.a,C.a,[]),c._12(512,X.b,X.b,[]),c._12(512,b.v,b.v,[]),c._12(512,b.i,b.i,[]),c._12(512,b.s,b.s,[]),c._12(512,kl.a,kl.a,[]),c._12(512,kl.b,kl.b,[]),c._12(512,v.a,v.a,[]),c._12(512,k,k,[]),c._12(256,yl.a,h,[]),c._12(256,H.c,void 0,[]),c._12(256,H.b,void 0,[])])})}});